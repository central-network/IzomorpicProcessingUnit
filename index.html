<script>
    WebAssembly.instantiateStreaming(fetch("window.wasm"), self).then(wasm => {
        const ipu = wasm.instance.exports;
        console.error(ipu);

        setTimeout(() => ipu.this.destroy(), 3000)

        const source = ipu.new(Float32Array, 12);
        const values = ipu.new(Float32Array, 12);
        const target = ipu.new(Float32Array, 12);

        console.table([
            { view: source, offset: source.byteOffset, length: source.length, buffer: source.buffer },
            { view: values, offset: values.byteOffset, length: values.length, buffer: values.buffer },
            { view: target, offset: target.byteOffset, length: target.length, buffer: target.buffer },
        ]);

        const call = ipu.add(source, values, target);
        console.warn(call);
    });
</script>